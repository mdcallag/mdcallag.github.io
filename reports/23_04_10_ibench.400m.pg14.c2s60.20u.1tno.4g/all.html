<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport"
     content="width=device-width, initial-scale=1, user-scalable=yes">

  <title>400M docs and 20 client(s)</title>
</head>
<body>
<div id="intro">
<h1 id="intro">Introduction</h1>
<p>
This is a report for the insert benchmark with 400M docs and 20 client(s).
It is generated by scripts (bash, awk, sed) and Tufte might not be impressed.
An overview of the insert benchmark <a href="http://smalldatum.blogspot.com/2017/06/the-insert-benchmark.html">is here</a>
and a short update <a href="http://smalldatum.blogspot.com/2020/07/updates-for-insert-benchmark.html">is here</a>.
Below, by <b>DBMS</b>, I mean DBMS+version.config.
An example is <b>my8020.c10b40</b> where <b>my</b> means MySQL, 8020 is version 8.0.20 and c10b40 is the name for the configuration file.
</p>
<p>
The test server is a c2-standard-60 from GCP with 30 cores, hyperthreading disabled, 240G RAM and 3T from XFS and SW RAID 0 striped over 8 local NVMe drives.
The benchmark was run with 20 clients and there were 1 or 2 connections per client (1 for queries, 1 for inserts).
The benchmark loads 400M rows without secondary indexes, creates secondary indexes, loads another 400M rows then
does 3 read+write tests for one hour each that do queries as fast as possible with 100, 500 and then 1000 writes/second/client concurrent with the queries.
Each read-write test runs for 1800 seconds.
The test was configured to use a table per client.
The database fits in the OS page cache but not the DBMS buffer pool.
Clients and the DBMS share one server. The per-database configs are in the per-database subdirectories <a href="https://github.com/mdcallag/mytools/tree/master/bench/conf/nuc8i7.ub1804">here</a>.
</p>
<p>
The tested DBMS are:
<ul>
<li>pg147_def.cx7_gcp_c2s60_4g - Postgres 14.7, the cx7_gcp_c2s60_4g config and a default build that used -O2
<li>pg147_o3_native_lto.cx7_gcp_c2s60_4g - Postgres 14.7, the cx7_gcp_c2s60_4g config and a build that uses -O3 -march=native -mtune=native -flto (link-time optimization)
</ul>
</p>
<div id="toc">
<hr />
<h1 id="toc">Contents</h1>
<ul>
<li><a href="#summary">Summary</a>
<li>l.i0: load without secondary indexes
<ul>
<li><a href="#l.i0.graph">graph</a>
<li><a href="#l.i0.metrics">metrics</a>
<li><a href="#l.i0.rt">response time</a>
</ul>
<li>l.x: create secondary indexes
<ul>
<li><a href="#l.x.graph">graph</a>
<li><a href="#l.x.metrics">metrics</a>
<li><a href="#l.x.rt">response time</a>
</ul>
<li>l.i1: continue load after secondary indexes created
<ul>
<li><a href="#l.i1.graph">graph</a>
<li><a href="#l.i1.metrics">metrics</a>
<li><a href="#l.i1.rt">response time</a>
</ul>
<li>q100.1: range queries with 100 insert/s per client
<ul>
<li><a href="#q100.1.graph">graph</a>
<li><a href="#q100.1.metrics">metrics</a>
<li><a href="#q100.1.rt">response time</a>
</ul>
<li>q500.1: range queries with 500 insert/s per client
<ul>
<li><a href="#q500.1.graph">graph</a>
<li><a href="#q500.1.metrics">metrics</a>
<li><a href="#q500.1.rt">response time</a>
</ul>
<li>q1000.1: range queries with 1000 insert/s per client
<ul>
<li><a href="#q1000.1.graph">graph</a>
<li><a href="#q1000.1.metrics">metrics</a>
<li><a href="#q1000.1.rt">response time</a>
</ul>
</ul>
</div>
<hr />
<h1 id="summary">Summary</h1>
<p>
The numbers are inserts/s for l.i0 and l.i1, indexed docs (or rows) /s for l.x and queries/s for q*.2.
The values are the average rate over the entire test for inserts (IPS) and queries (QPS).
The range of values for IPS and QPS is split into 3 parts: bottom 25&#37;, middle 50&#37;, top 25&#37;.
Values in the bottom 25&#37; have a red background, values in the top 25&#37; have a green background and values in the middle have no color.
A gray background is used for values that can be ignored because the DBMS did not sustain the target insert rate.
Red backgrounds are not used when the minimum value is within 80&#37 of the max value.
</p>
<style type="text/css">
  table td#cmin { background-color:#FF9A9A }
  table td#cmax { background-color:#81FFA6 }
  table td#csla { background-color:#FFC172 }
  table td#cgray { background-color:#D7D7D7 }
  td {
    text-align:right
  }
</style>
<table border="1" cellpadding="8" >
<tr><th>dbms</th><th>l.i0</th><th>l.x</th><th>l.i1</th><th>q100.1</th><th>q500.1</th><th>q1000.1</th></tr>
<tr><td>400m.pg147_def.cx7_gcp_c2s60_4g</td> <td>1351351</td><td>1835321</td><td>23135</td><td id="cgray">101923</td><td id="cgray">75633</td><td id="cgray">51512</td><tr><td>400m.pg147_o3_native_lto.cx7_gcp_c2s60_4g</td> <td id="cmax">1393728</td><td id="cmax">1860930</td><td id="cmax">23214</td><td id="cgray">108297</td><td id="cgray">77509</td><td id="cgray">52387</td></table>
<p>
This lists the average rate of inserts/s for the tests that do inserts concurrent with queries.
For such tests the query rate is listed in the table above.
The read+write tests are setup so that the insert rate should match the target rate every second.
Cells that are not at least 95&#37; of the target have a red background to indicate a failure to satisfy the target.
</p>
<style type="text/css">
  table td#cmin { background-color:#FF9A9A }
  table td#cmax { background-color:#81FFA6 }
  table td#csla { background-color:#FFC172 }
  table td#cgray { background-color:#D7D7D7 }
  td {
    text-align:right
  }
</style>
<table border="1" cellpadding="8" >
<tr><th>dbms</th><th>q100.1</th><th>q500.1</th><th>q1000.1</th></tr>
<tr><td>pg147_def.cx7_gcp_c2s60_4g</td><td>1976</td><td>9885</td><td id="cmin">18063</td></tr>
<tr><td>pg147_o3_native_lto.cx7_gcp_c2s60_4g</td><td>1976</td><td>9885</td><td id="cmin">18063</td></tr>
<tr><td>target</td><td id=cgray>2000</td><td id=cgray>10000</td><td id=cgray>20000</td></tr>
</table>
<hr />
<h1 id="l.i0.graph">l.i0</h1>
<p>l.i0: load without secondary indexes.
 Graphs for performance per 1-second interval <a href="tput.l.i0.html">are here</a>.
</p>
<p>Average throughput:</p>
<img src = "ch.l.i0.ips.png" alt = "Image" />
<p>Insert response time histogram: each cell has the percentage of responses that take <= the time in the header and <b>max</b> is the max response time in seconds. For the <b>max</b> column values in the top 25&#37; of the range have a red background and in the bottom 25&#37; of the range have a green background. The red background is not used when the min value is within 80&#37 of the max value.</p><style type="text/css">
table td#c0 { background-color:#fefefe }
table td#c1 { background-color:#fcfcfc }
table td#c2 { background-color:#fafafa }
table td#c3 { background-color:#f8f8f8 }
table td#c4 { background-color:#f6f6f6 }
table td#c5 { background-color:#f4f4f4 }
table td#c6 { background-color:#f2f2f2 }
table td#c7 { background-color:#f0f0f0 }
table td#c8 { background-color:#eeeeee }
table td#c9 { background-color:#ececec }
table td#c10 { background-color:#eaeaea }
table td#c11 { background-color:#e8e8e8 }
table td#c12 { background-color:#e6e6e6 }
table td#c13 { background-color:#e4e4e4 }
table td#c14 { background-color:#e2e2e2 }
table td#c15 { background-color:#e0e0e0 }
table td#c16 { background-color:#dedede }
table td#c17 { background-color:#dcdcdc }
table td#c18 { background-color:#dadada }
table td#c19 { background-color:#d8d8d8 }
table td#c20 { background-color:#d6d6d6 }
table td#cmaxr { background-color:#FF9A9A }
table td#cminr { background-color:#81FFA6 }
 { text-align: right }
</style>
<table border="1" cellpadding="8" >
<tr>
<th>dbms</th><th>256us</th><th>1ms</th><th>4ms</th><th>16ms</th><th>64ms</th><th>256ms</th><th>1s</th><th>4s</th><th>16s</th><th>gt</th><th>max</th></tr>
<tr><td id="c0">pg147_def.cx7_gcp_c2s60_4g</td><td></td><td id="c12">61.250</td><td id="c8">37.566</td><td id="c0">1.109</td><td id="c0">0.037</td><td id="c0">0.027</td><td id="c0">0.011</td><td id="c0">0.001</td><td></td><td></td><td>1.102</td></tr>
<tr><td id="c0">pg147_o3_native_lto.cx7_gcp_c2s60_4g</td><td></td><td id="c12">61.614</td><td id="c7">37.404</td><td id="c0">0.905</td><td id="c0">0.034</td><td id="c0">0.029</td><td id="c0">0.013</td><td id="c0">0.001</td><td></td><td></td><td id="cmaxr">1.310</td></tr>
</table>
<p>
Performance metrics for the DBMS listed above. Some are normalized by throughput, others are not. Legend for results <a href="https://mdcallag.github.io/ibench-results.html">is here</a>.
</p>
<pre>
ips	qps	rps	rmbps	wps	wmbps	rpq	rkbpq	wpi	wkbpi	csps	cpups	cspq	cpupq	dbgb1	dbgb2	rss	maxop	p50	p99	tag
1351351	0	551	8.7	9449.0	568.9	0.000	0.007	0.007	0.431	207204	59.9	0.153	13	38.3	103.2	NA	1.102	76815	7591	400m.pg147_def.cx7_gcp_c2s60_4g
1393728	0	674	7.4	9816.2	593.3	0.000	0.005	0.007	0.436	227440	59.1	0.163	13	38.3	103.2	NA	1.310	79411	8890	400m.pg147_o3_native_lto.cx7_gcp_c2s60_4g
</pre>
<hr />
<h1 id="l.x.graph">l.x</h1>
<p>l.x: create secondary indexes.
</p>
<p>Average throughput:</p>
<img src = "ch.l.x.ips.png" alt = "Image" />
<p>
Performance metrics for the DBMS listed above. Some are normalized by throughput, others are not. Legend for results <a href="https://mdcallag.github.io/ibench-results.html">is here</a>.
</p>
<pre>
ips	qps	rps	rmbps	wps	wmbps	rpq	rkbpq	wpi	wkbpi	csps	cpups	cspq	cpupq	dbgb1	dbgb2	rss	maxop	p50	p99	tag
1835321	0	12458	268.8	5920.4	763.9	0.007	0.150	0.003	0.426	115729	20.7	0.063	3	73.5	193.4	NA	0.321	NA	NA	400m.pg147_def.cx7_gcp_c2s60_4g
1860930	0	7108	260.8	5843.4	763.5	0.004	0.143	0.003	0.420	116025	20.5	0.062	3	73.5	190.9	NA	0.387	NA	NA	400m.pg147_o3_native_lto.cx7_gcp_c2s60_4g
</pre>
<hr />
<h1 id="l.i1.graph">l.i1</h1>
<p>l.i1: continue load after secondary indexes created.
 Graphs for performance per 1-second interval <a href="tput.l.i1.html">are here</a>.
</p>
<p>Average throughput:</p>
<img src = "ch.l.i1.ips.png" alt = "Image" />
<p>Insert response time histogram: each cell has the percentage of responses that take <= the time in the header and <b>max</b> is the max response time in seconds. For the <b>max</b> column values in the top 25&#37; of the range have a red background and in the bottom 25&#37; of the range have a green background. The red background is not used when the min value is within 80&#37 of the max value.</p><style type="text/css">
table td#c0 { background-color:#fefefe }
table td#c1 { background-color:#fcfcfc }
table td#c2 { background-color:#fafafa }
table td#c3 { background-color:#f8f8f8 }
table td#c4 { background-color:#f6f6f6 }
table td#c5 { background-color:#f4f4f4 }
table td#c6 { background-color:#f2f2f2 }
table td#c7 { background-color:#f0f0f0 }
table td#c8 { background-color:#eeeeee }
table td#c9 { background-color:#ececec }
table td#c10 { background-color:#eaeaea }
table td#c11 { background-color:#e8e8e8 }
table td#c12 { background-color:#e6e6e6 }
table td#c13 { background-color:#e4e4e4 }
table td#c14 { background-color:#e2e2e2 }
table td#c15 { background-color:#e0e0e0 }
table td#c16 { background-color:#dedede }
table td#c17 { background-color:#dcdcdc }
table td#c18 { background-color:#dadada }
table td#c19 { background-color:#d8d8d8 }
table td#c20 { background-color:#d6d6d6 }
table td#cmaxr { background-color:#FF9A9A }
table td#cminr { background-color:#81FFA6 }
 { text-align: right }
</style>
<table border="1" cellpadding="8" >
<tr>
<th>dbms</th><th>256us</th><th>1ms</th><th>4ms</th><th>16ms</th><th>64ms</th><th>256ms</th><th>1s</th><th>4s</th><th>16s</th><th>gt</th><th>max</th></tr>
<tr><td id="c0">pg147_def.cx7_gcp_c2s60_4g</td><td></td><td></td><td></td><td id="c0">0.012</td><td id="c18">88.458</td><td id="c2">11.526</td><td id="c0">0.004</td><td></td><td></td><td></td><td id="cmaxr">0.415</td></tr>
<tr><td id="c0">pg147_o3_native_lto.cx7_gcp_c2s60_4g</td><td></td><td></td><td></td><td id="c0">0.016</td><td id="c18">88.550</td><td id="c2">11.430</td><td id="c0">0.004</td><td></td><td></td><td></td><td>0.411</td></tr>
</table>
<p>
Performance metrics for the DBMS listed above. Some are normalized by throughput, others are not. Legend for results <a href="https://mdcallag.github.io/ibench-results.html">is here</a>.
</p>
<pre>
ips	qps	rps	rmbps	wps	wmbps	rpq	rkbpq	wpi	wkbpi	csps	cpups	cspq	cpupq	dbgb1	dbgb2	rss	maxop	p50	p99	tag
23135	0	70070	722.2	62760.9	598.9	3.029	31.967	2.713	26.510	131992	12.2	5.705	158	163.3	258.5	0.0	0.415	1199	599	400m.pg147_def.cx7_gcp_c2s60_4g
23214	0	70190	722.2	63026.9	600.5	3.024	31.857	2.715	26.488	132756	11.9	5.719	154	163.3	259.4	0.0	0.411	1199	599	400m.pg147_o3_native_lto.cx7_gcp_c2s60_4g
</pre>
<hr />
<h1 id="q100.1.graph">q100.1</h1>
<p>q100.1: range queries with 100 insert/s per client. Graphs for performance per 1-second interval <a href="tput.q.L1.ips100.html">are here</a>.</p>
<p>Average throughput:</p>
<img src = "ch.q100.1.qps.png" alt = "Image" />
<p>Query response time histogram: each cell has the percentage of responses that take <= the time in the header and <b>max</b> is the max response time in seconds. For <b>max</b> values in the top 25&#37; of the range have a red background and in the bottom 25&#37; of the range have a green background. The red background is not used when the min value is within 80&#37 of the max value.</p><style type="text/css">
table td#c0 { background-color:#fefefe }
table td#c1 { background-color:#fcfcfc }
table td#c2 { background-color:#fafafa }
table td#c3 { background-color:#f8f8f8 }
table td#c4 { background-color:#f6f6f6 }
table td#c5 { background-color:#f4f4f4 }
table td#c6 { background-color:#f2f2f2 }
table td#c7 { background-color:#f0f0f0 }
table td#c8 { background-color:#eeeeee }
table td#c9 { background-color:#ececec }
table td#c10 { background-color:#eaeaea }
table td#c11 { background-color:#e8e8e8 }
table td#c12 { background-color:#e6e6e6 }
table td#c13 { background-color:#e4e4e4 }
table td#c14 { background-color:#e2e2e2 }
table td#c15 { background-color:#e0e0e0 }
table td#c16 { background-color:#dedede }
table td#c17 { background-color:#dcdcdc }
table td#c18 { background-color:#dadada }
table td#c19 { background-color:#d8d8d8 }
table td#c20 { background-color:#d6d6d6 }
table td#cmaxr { background-color:#FF9A9A }
table td#cminr { background-color:#81FFA6 }
 { text-align: right }
</style>
<table border="1" cellpadding="8" >
<tr>
<th>dbms</th><th>256us</th><th>1ms</th><th>4ms</th><th>16ms</th><th>64ms</th><th>256ms</th><th>1s</th><th>4s</th><th>16s</th><th>gt</th><th>max</th></tr>
<tr><td id="c0">pg147_def.cx7_gcp_c2s60_4g</td><td id="c13">67.172</td><td id="c7">32.581</td><td id="c0">0.242</td><td id="c0">0.005</td><td>nonzero</td><td>nonzero</td><td></td><td></td><td></td><td></td><td>0.212</td></tr>
<tr><td id="c0">pg147_o3_native_lto.cx7_gcp_c2s60_4g</td><td id="c14">69.633</td><td id="c6">30.132</td><td id="c0">0.230</td><td id="c0">0.005</td><td>nonzero</td><td>nonzero</td><td></td><td></td><td></td><td></td><td id="cmaxr">0.234</td></tr>
</table>
<p>Insert response time histogram: each cell has the percentage of responses that take <= the time in the header and <b>max</b> is the max response time in seconds. For <b>max</b> values in the top 25&#37; of the range have a red background and in the bottom 25&#37; of the range have a green background. The red background is not used when the min value is within 80&#37 of the max value.</p><style type="text/css">
table td#c0 { background-color:#fefefe }
table td#c1 { background-color:#fcfcfc }
table td#c2 { background-color:#fafafa }
table td#c3 { background-color:#f8f8f8 }
table td#c4 { background-color:#f6f6f6 }
table td#c5 { background-color:#f4f4f4 }
table td#c6 { background-color:#f2f2f2 }
table td#c7 { background-color:#f0f0f0 }
table td#c8 { background-color:#eeeeee }
table td#c9 { background-color:#ececec }
table td#c10 { background-color:#eaeaea }
table td#c11 { background-color:#e8e8e8 }
table td#c12 { background-color:#e6e6e6 }
table td#c13 { background-color:#e4e4e4 }
table td#c14 { background-color:#e2e2e2 }
table td#c15 { background-color:#e0e0e0 }
table td#c16 { background-color:#dedede }
table td#c17 { background-color:#dcdcdc }
table td#c18 { background-color:#dadada }
table td#c19 { background-color:#d8d8d8 }
table td#c20 { background-color:#d6d6d6 }
table td#cmaxr { background-color:#FF9A9A }
table td#cminr { background-color:#81FFA6 }
 { text-align: right }
</style>
<table border="1" cellpadding="8" >
<tr>
<th>dbms</th><th>256us</th><th>1ms</th><th>4ms</th><th>16ms</th><th>64ms</th><th>256ms</th><th>1s</th><th>4s</th><th>16s</th><th>gt</th><th>max</th></tr>
<tr><td id="c0">pg147_def.cx7_gcp_c2s60_4g</td><td></td><td></td><td></td><td id="c0">0.015</td><td id="c20">99.860</td><td id="c0">0.096</td><td id="c0">0.029</td><td></td><td></td><td></td><td id="cmaxr">0.734</td></tr>
<tr><td id="c0">pg147_o3_native_lto.cx7_gcp_c2s60_4g</td><td></td><td></td><td></td><td id="c0">0.015</td><td id="c20">99.858</td><td id="c0">0.106</td><td id="c0">0.021</td><td></td><td></td><td></td><td id="cminr">0.376</td></tr>
</table>
<p>
Performance metrics for the DBMS listed above. Some are normalized by throughput, others are not. Legend for results <a href="https://mdcallag.github.io/ibench-results.html">is here</a>.
</p>
<pre>
ips	qps	rps	rmbps	wps	wmbps	rpq	rkbpq	wpi	wkbpi	csps	cpups	cspq	cpupq	dbgb1	dbgb2	rss	maxop	p50	p99	tag
1976	101923	86278	758.9	6342.0	71.7	0.847	7.625	3.210	37.154	474329	37.7	4.654	111	163.9	235.8	0.0	0.212	5085	4523	400m.pg147_def.cx7_gcp_c2s60_4g
1976	108297	81146	788.0	6348.6	72.6	0.749	7.451	3.213	37.613	497635	38.1	4.595	106	163.9	234.6	0.0	0.234	5527	4765	400m.pg147_o3_native_lto.cx7_gcp_c2s60_4g
</pre>
<hr />
<h1 id="q500.1.graph">q500.1</h1>
<p>q500.1: range queries with 500 insert/s per client. Graphs for performance per 1-second interval <a href="tput.q.L2.ips500.html">are here</a>.</p>
<p>Average throughput:</p>
<img src = "ch.q500.1.qps.png" alt = "Image" />
<p>Query response time histogram: each cell has the percentage of responses that take <= the time in the header and <b>max</b> is the max response time in seconds. For <b>max</b> values in the top 25&#37; of the range have a red background and in the bottom 25&#37; of the range have a green background. The red background is not used when the min value is within 80&#37 of the max value.</p><style type="text/css">
table td#c0 { background-color:#fefefe }
table td#c1 { background-color:#fcfcfc }
table td#c2 { background-color:#fafafa }
table td#c3 { background-color:#f8f8f8 }
table td#c4 { background-color:#f6f6f6 }
table td#c5 { background-color:#f4f4f4 }
table td#c6 { background-color:#f2f2f2 }
table td#c7 { background-color:#f0f0f0 }
table td#c8 { background-color:#eeeeee }
table td#c9 { background-color:#ececec }
table td#c10 { background-color:#eaeaea }
table td#c11 { background-color:#e8e8e8 }
table td#c12 { background-color:#e6e6e6 }
table td#c13 { background-color:#e4e4e4 }
table td#c14 { background-color:#e2e2e2 }
table td#c15 { background-color:#e0e0e0 }
table td#c16 { background-color:#dedede }
table td#c17 { background-color:#dcdcdc }
table td#c18 { background-color:#dadada }
table td#c19 { background-color:#d8d8d8 }
table td#c20 { background-color:#d6d6d6 }
table td#cmaxr { background-color:#FF9A9A }
table td#cminr { background-color:#81FFA6 }
 { text-align: right }
</style>
<table border="1" cellpadding="8" >
<tr>
<th>dbms</th><th>256us</th><th>1ms</th><th>4ms</th><th>16ms</th><th>64ms</th><th>256ms</th><th>1s</th><th>4s</th><th>16s</th><th>gt</th><th>max</th></tr>
<tr><td id="c0">pg147_def.cx7_gcp_c2s60_4g</td><td id="c12">59.981</td><td id="c8">38.421</td><td id="c0">1.464</td><td id="c0">0.128</td><td id="c0">0.006</td><td>nonzero</td><td></td><td></td><td></td><td></td><td id="cmaxr">0.223</td></tr>
<tr><td id="c0">pg147_o3_native_lto.cx7_gcp_c2s60_4g</td><td id="c12">60.789</td><td id="c8">37.633</td><td id="c0">1.446</td><td id="c0">0.126</td><td id="c0">0.006</td><td>nonzero</td><td></td><td></td><td></td><td></td><td id="cminr">0.128</td></tr>
</table>
<p>Insert response time histogram: each cell has the percentage of responses that take <= the time in the header and <b>max</b> is the max response time in seconds. For <b>max</b> values in the top 25&#37; of the range have a red background and in the bottom 25&#37; of the range have a green background. The red background is not used when the min value is within 80&#37 of the max value.</p><style type="text/css">
table td#c0 { background-color:#fefefe }
table td#c1 { background-color:#fcfcfc }
table td#c2 { background-color:#fafafa }
table td#c3 { background-color:#f8f8f8 }
table td#c4 { background-color:#f6f6f6 }
table td#c5 { background-color:#f4f4f4 }
table td#c6 { background-color:#f2f2f2 }
table td#c7 { background-color:#f0f0f0 }
table td#c8 { background-color:#eeeeee }
table td#c9 { background-color:#ececec }
table td#c10 { background-color:#eaeaea }
table td#c11 { background-color:#e8e8e8 }
table td#c12 { background-color:#e6e6e6 }
table td#c13 { background-color:#e4e4e4 }
table td#c14 { background-color:#e2e2e2 }
table td#c15 { background-color:#e0e0e0 }
table td#c16 { background-color:#dedede }
table td#c17 { background-color:#dcdcdc }
table td#c18 { background-color:#dadada }
table td#c19 { background-color:#d8d8d8 }
table td#c20 { background-color:#d6d6d6 }
table td#cmaxr { background-color:#FF9A9A }
table td#cminr { background-color:#81FFA6 }
 { text-align: right }
</style>
<table border="1" cellpadding="8" >
<tr>
<th>dbms</th><th>256us</th><th>1ms</th><th>4ms</th><th>16ms</th><th>64ms</th><th>256ms</th><th>1s</th><th>4s</th><th>16s</th><th>gt</th><th>max</th></tr>
<tr><td id="c0">pg147_def.cx7_gcp_c2s60_4g</td><td></td><td></td><td></td><td id="c0">0.008</td><td id="c18">92.164</td><td id="c2">7.823</td><td id="c0">0.005</td><td></td><td></td><td></td><td id="cmaxr">0.274</td></tr>
<tr><td id="c0">pg147_o3_native_lto.cx7_gcp_c2s60_4g</td><td></td><td></td><td></td><td id="c0">0.004</td><td id="c18">92.297</td><td id="c2">7.698</td><td>nonzero</td><td></td><td></td><td></td><td>0.272</td></tr>
</table>
<p>
Performance metrics for the DBMS listed above. Some are normalized by throughput, others are not. Legend for results <a href="https://mdcallag.github.io/ibench-results.html">is here</a>.
</p>
<pre>
ips	qps	rps	rmbps	wps	wmbps	rpq	rkbpq	wpi	wkbpi	csps	cpups	cspq	cpupq	dbgb1	dbgb2	rss	maxop	p50	p99	tag
9885	75633	94344	884.7	29317.4	307.4	1.247	11.978	2.966	31.848	411905	36.5	5.446	145	167.5	236.7	0.0	0.223	3996	1982	400m.pg147_def.cx7_gcp_c2s60_4g
9885	77509	96098	909.0	29212.7	306.7	1.240	12.010	2.955	31.776	420603	35.7	5.427	138	167.4	236.7	NA	0.128	4123	1935	400m.pg147_o3_native_lto.cx7_gcp_c2s60_4g
</pre>
<hr />
<h1 id="q1000.1.graph">q1000.1</h1>
<p>q1000.1: range queries with 1000 insert/s per client. Graphs for performance per 1-second interval <a href="tput.q.L3.ips1000.html">are here</a>.</p>
<p>Average throughput:</p>
<img src = "ch.q1000.1.qps.png" alt = "Image" />
<p>Query response time histogram: each cell has the percentage of responses that take <= the time in the header and <b>max</b> is the max response time in seconds. For <b>max</b> values in the top 25&#37; of the range have a red background and in the bottom 25&#37; of the range have a green background. The red background is not used when the min value is within 80&#37 of the max value.</p><style type="text/css">
table td#c0 { background-color:#fefefe }
table td#c1 { background-color:#fcfcfc }
table td#c2 { background-color:#fafafa }
table td#c3 { background-color:#f8f8f8 }
table td#c4 { background-color:#f6f6f6 }
table td#c5 { background-color:#f4f4f4 }
table td#c6 { background-color:#f2f2f2 }
table td#c7 { background-color:#f0f0f0 }
table td#c8 { background-color:#eeeeee }
table td#c9 { background-color:#ececec }
table td#c10 { background-color:#eaeaea }
table td#c11 { background-color:#e8e8e8 }
table td#c12 { background-color:#e6e6e6 }
table td#c13 { background-color:#e4e4e4 }
table td#c14 { background-color:#e2e2e2 }
table td#c15 { background-color:#e0e0e0 }
table td#c16 { background-color:#dedede }
table td#c17 { background-color:#dcdcdc }
table td#c18 { background-color:#dadada }
table td#c19 { background-color:#d8d8d8 }
table td#c20 { background-color:#d6d6d6 }
table td#cmaxr { background-color:#FF9A9A }
table td#cminr { background-color:#81FFA6 }
 { text-align: right }
</style>
<table border="1" cellpadding="8" >
<tr>
<th>dbms</th><th>256us</th><th>1ms</th><th>4ms</th><th>16ms</th><th>64ms</th><th>256ms</th><th>1s</th><th>4s</th><th>16s</th><th>gt</th><th>max</th></tr>
<tr><td id="c0">pg147_def.cx7_gcp_c2s60_4g</td><td id="c11">53.443</td><td id="c8">42.066</td><td id="c1">3.875</td><td id="c0">0.577</td><td id="c0">0.040</td><td>nonzero</td><td></td><td></td><td></td><td></td><td id="cmaxr">0.158</td></tr>
<tr><td id="c0">pg147_o3_native_lto.cx7_gcp_c2s60_4g</td><td id="c11">53.491</td><td id="c8">42.089</td><td id="c1">3.816</td><td id="c0">0.565</td><td id="c0">0.038</td><td>nonzero</td><td></td><td></td><td></td><td></td><td id="cminr">0.100</td></tr>
</table>
<p>Insert response time histogram: each cell has the percentage of responses that take <= the time in the header and <b>max</b> is the max response time in seconds. For <b>max</b> values in the top 25&#37; of the range have a red background and in the bottom 25&#37; of the range have a green background. The red background is not used when the min value is within 80&#37 of the max value.</p><style type="text/css">
table td#c0 { background-color:#fefefe }
table td#c1 { background-color:#fcfcfc }
table td#c2 { background-color:#fafafa }
table td#c3 { background-color:#f8f8f8 }
table td#c4 { background-color:#f6f6f6 }
table td#c5 { background-color:#f4f4f4 }
table td#c6 { background-color:#f2f2f2 }
table td#c7 { background-color:#f0f0f0 }
table td#c8 { background-color:#eeeeee }
table td#c9 { background-color:#ececec }
table td#c10 { background-color:#eaeaea }
table td#c11 { background-color:#e8e8e8 }
table td#c12 { background-color:#e6e6e6 }
table td#c13 { background-color:#e4e4e4 }
table td#c14 { background-color:#e2e2e2 }
table td#c15 { background-color:#e0e0e0 }
table td#c16 { background-color:#dedede }
table td#c17 { background-color:#dcdcdc }
table td#c18 { background-color:#dadada }
table td#c19 { background-color:#d8d8d8 }
table td#c20 { background-color:#d6d6d6 }
table td#cmaxr { background-color:#FF9A9A }
table td#cminr { background-color:#81FFA6 }
 { text-align: right }
</style>
<table border="1" cellpadding="8" >
<tr>
<th>dbms</th><th>256us</th><th>1ms</th><th>4ms</th><th>16ms</th><th>64ms</th><th>256ms</th><th>1s</th><th>4s</th><th>16s</th><th>gt</th><th>max</th></tr>
<tr><td id="c0">pg147_def.cx7_gcp_c2s60_4g</td><td></td><td></td><td></td><td id="c0">0.002</td><td id="c17">82.866</td><td id="c3">17.132</td><td id="c0">0.001</td><td></td><td></td><td></td><td>0.270</td></tr>
<tr><td id="c0">pg147_o3_native_lto.cx7_gcp_c2s60_4g</td><td></td><td></td><td></td><td id="c0">0.002</td><td id="c17">82.686</td><td id="c3">17.312</td><td id="c0">0.001</td><td></td><td></td><td></td><td id="cmaxr">0.277</td></tr>
</table>
<p>
Performance metrics for the DBMS listed above. Some are normalized by throughput, others are not. Legend for results <a href="https://mdcallag.github.io/ibench-results.html">is here</a>.
</p>
<pre>
ips	qps	rps	rmbps	wps	wmbps	rpq	rkbpq	wpi	wkbpi	csps	cpups	cspq	cpupq	dbgb1	dbgb2	rss	maxop	p50	p99	tag
18063	51512	96898	946.9	51666.2	531.0	1.881	18.824	2.860	30.100	362525	36.4	7.038	212	179.6	272.1	0.0	0.158	2701	1422	400m.pg147_def.cx7_gcp_c2s60_4g
18063	52387	98852	961.4	51571.5	527.9	1.887	18.792	2.855	29.925	367587	35.6	7.017	204	179.6	272.2	0.0	0.100	2734	1423	400m.pg147_o3_native_lto.cx7_gcp_c2s60_4g
</pre>
<hr />
<h1 id="l.i0.metrics">l.i0</h1>
<p>l.i0: load without secondary indexes</p>
<p>
Performance metrics for all DBMS, not just the ones listed above. Some are normalized by throughput, others are not. Legend for results <a href="https://mdcallag.github.io/ibench-results.html">is here</a>.
</p>
<pre>
ips	qps	rps	rmbps	wps	wmbps	rpq	rkbpq	wpi	wkbpi	csps	cpups	cspq	cpupq	dbgb1	dbgb2	rss	maxop	p50	p99	tag
1351351	0	551	8.7	9449.0	568.9	0.000	0.007	0.007	0.431	207204	59.9	0.153	13	38.3	103.2	NA	1.102	76815	7591	400m.pg147_def.cx7_gcp_c2s60_4g
1393728	0	674	7.4	9816.2	593.3	0.000	0.005	0.007	0.436	227440	59.1	0.163	13	38.3	103.2	NA	1.310	79411	8890	400m.pg147_o3_native_lto.cx7_gcp_c2s60_4g
</pre>
<hr />
<h1 id="l.x.metrics">l.x</h1>
<p>l.x: create secondary indexes</p>
<p>
Performance metrics for all DBMS, not just the ones listed above. Some are normalized by throughput, others are not. Legend for results <a href="https://mdcallag.github.io/ibench-results.html">is here</a>.
</p>
<pre>
ips	qps	rps	rmbps	wps	wmbps	rpq	rkbpq	wpi	wkbpi	csps	cpups	cspq	cpupq	dbgb1	dbgb2	rss	maxop	p50	p99	tag
1835321	0	12458	268.8	5920.4	763.9	0.007	0.150	0.003	0.426	115729	20.7	0.063	3	73.5	193.4	NA	0.321	NA	NA	400m.pg147_def.cx7_gcp_c2s60_4g
1860930	0	7108	260.8	5843.4	763.5	0.004	0.143	0.003	0.420	116025	20.5	0.062	3	73.5	190.9	NA	0.387	NA	NA	400m.pg147_o3_native_lto.cx7_gcp_c2s60_4g
</pre>
<hr />
<h1 id="l.i1.metrics">l.i1</h1>
<p>l.i1: continue load after secondary indexes created</p>
<p>
Performance metrics for all DBMS, not just the ones listed above. Some are normalized by throughput, others are not. Legend for results <a href="https://mdcallag.github.io/ibench-results.html">is here</a>.
</p>
<pre>
ips	qps	rps	rmbps	wps	wmbps	rpq	rkbpq	wpi	wkbpi	csps	cpups	cspq	cpupq	dbgb1	dbgb2	rss	maxop	p50	p99	tag
23135	0	70070	722.2	62760.9	598.9	3.029	31.967	2.713	26.510	131992	12.2	5.705	158	163.3	258.5	0.0	0.415	1199	599	400m.pg147_def.cx7_gcp_c2s60_4g
23214	0	70190	722.2	63026.9	600.5	3.024	31.857	2.715	26.488	132756	11.9	5.719	154	163.3	259.4	0.0	0.411	1199	599	400m.pg147_o3_native_lto.cx7_gcp_c2s60_4g
</pre>
<hr />
<h1 id="q100.1.metrics">q100.1</h1>
<p>q100.1: range queries with 100 insert/s per client</p>
<p>
Performance metrics for all DBMS, not just the ones listed above. Some are normalized by throughput, others are not. Legend for results <a href="https://mdcallag.github.io/ibench-results.html">is here</a>.
</p>
<pre>
ips	qps	rps	rmbps	wps	wmbps	rpq	rkbpq	wpi	wkbpi	csps	cpups	cspq	cpupq	dbgb1	dbgb2	rss	maxop	p50	p99	tag
1976	101923	86278	758.9	6342.0	71.7	0.847	7.625	3.210	37.154	474329	37.7	4.654	111	163.9	235.8	0.0	0.212	5085	4523	400m.pg147_def.cx7_gcp_c2s60_4g
1976	108297	81146	788.0	6348.6	72.6	0.749	7.451	3.213	37.613	497635	38.1	4.595	106	163.9	234.6	0.0	0.234	5527	4765	400m.pg147_o3_native_lto.cx7_gcp_c2s60_4g
</pre>
<hr />
<h1 id="q500.1.metrics">q500.1</h1>
<p>q500.1: range queries with 500 insert/s per client</p>
<p>
Performance metrics for all DBMS, not just the ones listed above. Some are normalized by throughput, others are not. Legend for results <a href="https://mdcallag.github.io/ibench-results.html">is here</a>.
</p>
<pre>
ips	qps	rps	rmbps	wps	wmbps	rpq	rkbpq	wpi	wkbpi	csps	cpups	cspq	cpupq	dbgb1	dbgb2	rss	maxop	p50	p99	tag
9885	75633	94344	884.7	29317.4	307.4	1.247	11.978	2.966	31.848	411905	36.5	5.446	145	167.5	236.7	0.0	0.223	3996	1982	400m.pg147_def.cx7_gcp_c2s60_4g
9885	77509	96098	909.0	29212.7	306.7	1.240	12.010	2.955	31.776	420603	35.7	5.427	138	167.4	236.7	NA	0.128	4123	1935	400m.pg147_o3_native_lto.cx7_gcp_c2s60_4g
</pre>
<hr />
<h1 id="q1000.1.metrics">q1000.1</h1>
<p>q1000.1: range queries with 1000 insert/s per client</p>
<p>
Performance metrics for all DBMS, not just the ones listed above. Some are normalized by throughput, others are not. Legend for results <a href="https://mdcallag.github.io/ibench-results.html">is here</a>.
</p>
<pre>
ips	qps	rps	rmbps	wps	wmbps	rpq	rkbpq	wpi	wkbpi	csps	cpups	cspq	cpupq	dbgb1	dbgb2	rss	maxop	p50	p99	tag
18063	51512	96898	946.9	51666.2	531.0	1.881	18.824	2.860	30.100	362525	36.4	7.038	212	179.6	272.1	0.0	0.158	2701	1422	400m.pg147_def.cx7_gcp_c2s60_4g
18063	52387	98852	961.4	51571.5	527.9	1.887	18.792	2.855	29.925	367587	35.6	7.017	204	179.6	272.2	0.0	0.100	2734	1423	400m.pg147_o3_native_lto.cx7_gcp_c2s60_4g
</pre>
<hr />
<h1 id="l.i0.rt">l.i0</h1>
<p>
<ul>
<li>l.i0: load without secondary indexes
<li>Legend for results <a href="https://mdcallag.github.io/ibench-results.html">is here</a>.
<li>Each entry lists the percentage of responses that fit in that bucket (slower than max time for previous bucket, faster than min time for next bucket).
</ul>
</p>
<p>Insert response time histogram</p>
<pre>
256us	1ms	4ms	16ms	64ms	256ms	1s	4s	16s	gt	max	tag
0.000	61.250	37.566	1.109	0.037	0.027	0.011	0.001	0.000	0.000	1.102	pg147_def.cx7_gcp_c2s60_4g
0.000	61.614	37.404	0.905	0.034	0.029	0.013	0.001	0.000	0.000	1.310	pg147_o3_native_lto.cx7_gcp_c2s60_4g
</pre>
<hr />
<h1 id="l.x.rt">l.x</h1>
<p>
<ul>
<li>l.x: create secondary indexes
<li>Legend for results <a href="https://mdcallag.github.io/ibench-results.html">is here</a>.
<li>Each entry lists the percentage of responses that fit in that bucket (slower than max time for previous bucket, faster than min time for next bucket).
</ul>
</p>
<p>TODO - determine whether there is data for create index response time</p>
<hr />
<h1 id="l.i1.rt">l.i1</h1>
<p>
<ul>
<li>l.i1: continue load after secondary indexes created
<li>Legend for results <a href="https://mdcallag.github.io/ibench-results.html">is here</a>.
<li>Each entry lists the percentage of responses that fit in that bucket (slower than max time for previous bucket, faster than min time for next bucket).
</ul>
</p>
<p>Insert response time histogram</p>
<pre>
256us	1ms	4ms	16ms	64ms	256ms	1s	4s	16s	gt	max	tag
0.000	0.000	0.000	0.012	88.458	11.526	0.004	0.000	0.000	0.000	0.415	pg147_def.cx7_gcp_c2s60_4g
0.000	0.000	0.000	0.016	88.550	11.430	0.004	0.000	0.000	0.000	0.411	pg147_o3_native_lto.cx7_gcp_c2s60_4g
</pre>
<hr />
<h1 id="q100.1.rt">q100.1</h1>
<p>
<ul>
<li>q100.1: range queries with 100 insert/s per client
<li>Legend for results <a href="https://mdcallag.github.io/ibench-results.html">is here</a>.
<li>Each entry lists the percentage of responses that fit in that bucket (slower than max time for previous bucket, faster than min time for next bucket).
</ul>
</p>
<p>Query response time histogram</p>
<pre>
256us	1ms	4ms	16ms	64ms	256ms	1s	4s	16s	gt	max	tag
67.172	32.581	0.242	0.005	nonzero	nonzero	0.000	0.000	0.000	0.000	0.212	pg147_def.cx7_gcp_c2s60_4g
69.633	30.132	0.230	0.005	nonzero	nonzero	0.000	0.000	0.000	0.000	0.234	pg147_o3_native_lto.cx7_gcp_c2s60_4g
</pre>
<p>Insert response time histogram</p>
<pre>
256us	1ms	4ms	16ms	64ms	256ms	1s	4s	16s	gt	max	tag
0.000	0.000	0.000	0.015	99.860	0.096	0.029	0.000	0.000	0.000	0.734	pg147_def.cx7_gcp_c2s60_4g
0.000	0.000	0.000	0.015	99.858	0.106	0.021	0.000	0.000	0.000	0.376	pg147_o3_native_lto.cx7_gcp_c2s60_4g
</pre>
<hr />
<h1 id="q500.1.rt">q500.1</h1>
<p>
<ul>
<li>q500.1: range queries with 500 insert/s per client
<li>Legend for results <a href="https://mdcallag.github.io/ibench-results.html">is here</a>.
<li>Each entry lists the percentage of responses that fit in that bucket (slower than max time for previous bucket, faster than min time for next bucket).
</ul>
</p>
<p>Query response time histogram</p>
<pre>
256us	1ms	4ms	16ms	64ms	256ms	1s	4s	16s	gt	max	tag
59.981	38.421	1.464	0.128	0.006	nonzero	0.000	0.000	0.000	0.000	0.223	pg147_def.cx7_gcp_c2s60_4g
60.789	37.633	1.446	0.126	0.006	nonzero	0.000	0.000	0.000	0.000	0.128	pg147_o3_native_lto.cx7_gcp_c2s60_4g
</pre>
<p>Insert response time histogram</p>
<pre>
256us	1ms	4ms	16ms	64ms	256ms	1s	4s	16s	gt	max	tag
0.000	0.000	0.000	0.008	92.164	7.823	0.005	0.000	0.000	0.000	0.274	pg147_def.cx7_gcp_c2s60_4g
0.000	0.000	0.000	0.004	92.297	7.698	nonzero	0.000	0.000	0.000	0.272	pg147_o3_native_lto.cx7_gcp_c2s60_4g
</pre>
<hr />
<h1 id="q1000.1.rt">q1000.1</h1>
<p>
<ul>
<li>q1000.1: range queries with 1000 insert/s per client
<li>Legend for results <a href="https://mdcallag.github.io/ibench-results.html">is here</a>.
<li>Each entry lists the percentage of responses that fit in that bucket (slower than max time for previous bucket, faster than min time for next bucket).
</ul>
</p>
<p>Query response time histogram</p>
<pre>
256us	1ms	4ms	16ms	64ms	256ms	1s	4s	16s	gt	max	tag
53.443	42.066	3.875	0.577	0.040	nonzero	0.000	0.000	0.000	0.000	0.158	pg147_def.cx7_gcp_c2s60_4g
53.491	42.089	3.816	0.565	0.038	nonzero	0.000	0.000	0.000	0.000	0.100	pg147_o3_native_lto.cx7_gcp_c2s60_4g
</pre>
<p>Insert response time histogram</p>
<pre>
256us	1ms	4ms	16ms	64ms	256ms	1s	4s	16s	gt	max	tag
0.000	0.000	0.000	0.002	82.866	17.132	0.001	0.000	0.000	0.000	0.270	pg147_def.cx7_gcp_c2s60_4g
0.000	0.000	0.000	0.002	82.686	17.312	0.001	0.000	0.000	0.000	0.277	pg147_o3_native_lto.cx7_gcp_c2s60_4g
</pre>
</body>
</html>
